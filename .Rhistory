out <- shape_info(map_name = "col_departments", ftype = "Gnm-Num", by_col = "name")
expect_true(all(class(out) %in% c("sf", "tbl_df", "tbl", "data.frame")))
expect_true(all(class(out$topoInfo) %in% c("sf", "tbl_df", "tbl", "data.frame")))
names(out)
devtools::load_all()
devtools::document()
devtools::install()
devtools::load_all(".")
df <- sample_data("Cat-Num", addNA = F)
names(df) <- c("a", "b")
out <- postprocess(d = df, col = "b", sort = "desc")
expect_identical(out$b, df %>% arrange(desc(b)) %>% .$b)
out <- postprocess(d = df, col = "b", sort = "asc")
expect_identical(out$b, df %>% arrange(b) %>% .$b)
postprocess(d = df, col = "b")
postprocess(d = df, col = "b", sort = NULL)
devtools::load_all(".")
postprocess(d = df, col = "b", sort = NULL)
postprocess(d = df, col = "b", sort = "desc")
postprocess(d = df, col = "b", sort = "asc")
postprocess(d = df, col = "b", sort = "aa")
devtools::load_all()
devtools::document()
devtools::install()
devtools::load_all(".")
devtools::load_all()
devtools::document()
devtools::install()
devtools::load_all(".")
data <- sample_data("Gcd-Cat-Num-Num-Cat-Gnm")
f <- homodatum::fringe(data)
nms <- homodatum::fringe_labels(f)
lf <- names(data)[c(1,3,5)]
l_tooltip <- lflt_tooltip(nms,
label_ftype = lf,
tooltip = "")
l_tooltip <- tooltip_map(nms,
label_ftype = lf,
tooltip = "")
nms_filter <-  nms[nms %in% lf]
nms_names <- names(nms_filter)
l <- map(seq_along(nms_filter), function(i){
paste0(nms_filter[[i]], ": {", nms_names[i], "_label}")
}) %>% unlist()
tooltip <- paste0(l, collapse = "<br/>")
expect_identical(l_tooltip, tooltip)
devtools::load_all()
devtools::document()
devtools::install()
devtools::load_all()
devtools::document()
devtools::install()
